{"version":3,"sources":["webpack:///./src/components/UserFollowCard.vue?dedb","webpack:///./src/views/UserFollower.vue?25ca","webpack:///src/views/UserFollower.vue","webpack:///./src/views/UserFollower.vue?7867","webpack:///./src/views/UserFollower.vue?21cc","webpack:///./src/components/UserFollowCard.vue?8ab5","webpack:///src/components/UserFollowCard.vue","webpack:///./src/components/UserFollowCard.vue?6200","webpack:///./src/components/UserFollowCard.vue?8999","webpack:///./src/views/UserFollower.vue?76b9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","follower","key","id","scopedSlots","_u","fn","attrs","_f","avatarImg","on","$event","stopPropagation","preventDefault","visit","proxy","_s","name","account","currentUser","directives","rawName","value","is_following","expression","isProcessing","follow","unfollow","introduction","staticRenderFns","components","UserFollowCard","mixins","data","followers","noFollowers","props","initialFollowers","type","required","methods","fetchUserFollowers","userAPI","statusText","Toast","icon","title","followShipAPI","user","pathName","computed","mapState","created","beforeRouteUpdate","to","from","next","watch","newVal","component","_t"],"mappings":"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","file":"js/chunk-323aaa92.04bb5101.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowCard.vue?vue&type=style&index=0&id=0a947838&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"follower-container\"},[[(_vm.noFollowers)?_c('h3',[_vm._v(\"尚無追蹤者\")]):_vm._l((_vm.followers),function(follower){return _c('UserFollowCard',{key:follower.id,scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"avatarFilter\")(follower.avatarImg),\"alt\":\"\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.visit(follower.id, 'user-tweets')}}})]},proxy:true},{key:\"name\",fn:function(){return [_vm._v(\" \"+_vm._s(follower.name)+\" \")]},proxy:true},{key:\"id\",fn:function(){return [_vm._v(\" \"+_vm._s(follower.account)+\" \")]},proxy:true},{key:\"btn\",fn:function(){return [_c('div',{staticClass:\"btn-group\"},[(_vm.currentUser.id !== follower.id)?_c('div',[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!follower.is_following),expression:\"!follower.is_following\"}],staticClass:\"follow\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.follow(follower.id)}}},[_vm._v(\" 跟隨 \")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(follower.is_following),expression:\"follower.is_following\"}],staticClass:\"following\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.unfollow(follower.id)}}},[_vm._v(\" 正在跟隨 \")])]):_c('button',{staticClass:\"following\",attrs:{\"disabled\":\"\"}},[_vm._v(\" 用戶本人 \")])])]},proxy:true},{key:\"text\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm._f(\"textFilter\")(follower.introduction))+\" \")]},proxy:true}],null,true)})})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"follower-container\">\n    <template>\n      <h3 v-if=\"noFollowers\">尚無追蹤者</h3>\n      <template v-else>\n        <UserFollowCard\n          v-for=\"follower in followers\"\n          :key=\"follower.id\"\n        >\n          <template v-slot:avatar>\n            <img\n              @click.stop.prevent=\"visit(follower.id, 'user-tweets')\"\n              class=\"avatar\" :src=\"follower.avatarImg | avatarFilter\" alt=\"\">      \n          </template>\n          <template v-slot:name>\n            {{follower.name}}\n          </template>\n          <template v-slot:id>\n            {{follower.account}}\n          </template>\n          <template v-slot:btn>\n            <div class=\"btn-group\">\n              <div v-if=\"currentUser.id !== follower.id\">\n                <button \n                :disabled=\"isProcessing\"\n                @click.stop.prevent=\"follow(follower.id)\"\n                v-show=\"!follower.is_following\" class=\"follow\">\n                跟隨\n                </button>\n                <button \n                  :disabled=\"isProcessing\"\n                  @click.stop.prevent=\"unfollow(follower.id)\"\n                  v-show=\"follower.is_following\" class=\"following\">\n                  正在跟隨\n                </button>\n              </div>\n                <button \n                v-else\n                disabled\n                class=\"following\">\n                用戶本人\n              </button>         \n            </div>       \n          </template>\n          <template v-slot:text>\n            {{follower.introduction | textFilter}}\n          </template>\n        </UserFollowCard>\n      </template>\n    </template>\n    \n  </div>\n  \n</template>\n<script>\nimport {imgFilter} from '../utils/mixins'\nimport {mapState} from 'vuex'\nimport {textFilter} from '../utils/mixins'\nimport followShipAPI from '../apis/followShip'\nimport {visitPage} from '../utils/mixins'\nimport UserFollowCard from '../components/UserFollowCard.vue'\nimport userAPI from '../apis/user'\nimport {Toast} from '../utils/helpers'\nexport default {\n  name: 'UserFollower',\n  components:{\n    UserFollowCard\n  },\n  mixins:[textFilter, visitPage, imgFilter],\n  data(){\n    return{\n      followers:[],\n      noFollowers: false,\n      isProcessing: false\n    } \n  },\n  props: {\n    // 點擊 Popular 追蹤/取消追蹤後更新的資料\n    initialFollowers: {\n      type: Array,\n      required: true\n    }\n  },\n  methods:{\n    async fetchUserFollowers(id){\n      try{\n        this.$store.commit(\"setIsLoading\", true);\n        const {data, statusText} = await userAPI.get({id})\n        const followers = data.Following\n        // 篩除非user的用戶\n        this.followers = followers.filter( follower => follower.role === 'user')\n\n        if(followers.length === 0) {\n          this.noFollowers = true\n        } else {\n          this.noFollowers = false\n        }\n        if(statusText !== 'OK'){\n          throw new Error(statusText)\n        }\n        this.$store.commit(\"setIsLoading\", false);\n      }catch(error){\n        this.$store.commit(\"setIsLoading\", false);\n        Toast.fire({\n          icon:'error',\n          title: '無法取得追蹤中用戶資料，請稍後再試'\n        })\n      }\n    },\n    async follow(id){\n      try{\n        this.isProcessing = true\n        const {statusText} = await followShipAPI.follow({id})\n        if(statusText !=='OK'){\n          throw new Error(statusText)\n        }\n        this.followers = this.followers.map(user => {\n          if(user.id !== id) {\n            return user\n          }\n          if(user.id === id) {\n            return{\n              ...user,\n              is_following: true\n            }\n          }\n        })\n        this.$emit('after-userfollow')\n        this.isProcessing = false\n      }catch(error){\n        this.isProcessing = false\n        Toast.fire({\n          icon:'error',\n          title:'無法追蹤此用戶，請稍後再試'\n        })\n      }       \n    },\n    async unfollow(id){  \n      try{\n        this.isProcessing = true\n        const {statusText} = await followShipAPI.unFollow({id})\n        if(statusText !== 'OK'){\n          throw new Error (statusText)\n        }\n        this.followers = this.followers.map(user => {\n          if(user.id !== id) {\n            return user\n          }\n          if(user.id === id) {\n            return{\n              ...user,\n              is_following: false\n            }\n          }\n        })\n        this.$emit('after-userfollow')\n        this.isProcessing = false\n      }catch(error){\n        this.isProcessing = false\n        Toast.fire({\n          icon:'error',\n          title:'無法取消追蹤此用戶，請稍後再試'\n        })\n      }       \n    },   \n    visit(id,pathName){\n      //使用mixins裡的函式\n      this.visitUserPage(id, pathName)\n    }   \n  },\n  computed:{\n    ...mapState(['currentUser'])\n  },\n  created(){\n    const {id} = this.$route.params\n    this.fetchUserFollowers(id)\n  },\n  beforeRouteUpdate(to, from, next){\n    const {id} = to.params\n    this.fetchUserFollowers(id)\n    next()\n  },\n  watch: {\n    // 當 initialFollowers 有更新，就重新賦值給 followers\n    initialFollowers(newVal) {\n      this.followers = [...newVal]\n      if (this.followers.length === 0) {\n        this.noFollowers = true\n      } else {\n        this.noFollowers = false\n      }\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n  @import \"../assets/scss/_basic.scss\";\n  .follower-container{\n    position: relative;\n  }\n  h3{\n    text-align: center;\n    margin-top: 1rem;\n  }\n  .btn-group{\n    position: absolute;\n    right: 30px;\n    .follow{\n      @extend %follow;\n    }\n    .following{\n      @extend %following;\n    }    \n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollower.vue?vue&type=template&id=a64cea74&scoped=true&\"\nimport script from \"./UserFollower.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollower.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollower.vue?vue&type=style&index=0&id=a64cea74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a64cea74\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"follow__card\"},[_c('div',{staticClass:\"follow__card__item\"},[_vm._t(\"avatar\",function(){return [_c('img',{attrs:{\"src\":require(\"../assets/static/images/noImage@2x.png\"),\"alt\":\"\"}})]})],2),_c('div',{staticClass:\"follow__card__item\"},[_c('div',{staticClass:\"account\"},[_c('p',{staticClass:\"name\"},[_vm._t(\"name\")],2),_vm._t(\"btn\")],2),_c('p',{staticClass:\"text\"},[_vm._t(\"text\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"follow__card\">\n    <div class=\"follow__card__item\">\n      <slot name=\"avatar\">\n        <img src=\"../assets/static/images/noImage@2x.png\" alt=\"\">\n      </slot>\n    </div>\n    <div class=\"follow__card__item\">\n      <div class=\"account\">\n        <p class=\"name\"><slot name=\"name\"></slot></p>\n        <slot name=\"btn\"></slot>\n      </div>\n      <p class=\"text\">\n        <slot name=\"text\" ></slot>\n      </p>    \n    </div>    \n  </div>\n  \n</template>\n<script>\n\nexport default {\n  \n  \n}\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../assets/scss/_basic.scss\";\n   .follow__card{\n    display: flex;\n    padding: 16px;\n    border-bottom: 1px solid $border-grey;\n    .avatar{\n        width: 50px;\n        height: 50px;\n        border-radius: 50%;\n    }\n    &__item:nth-child(2){\n      padding-left: 10px;\n    }\n    &__item{\n      line-height:26px;\n      \n      .account{\n        display: flex;\n        align-items: center;\n        vertical-align: sub;\n        padding-bottom: 10px;\n        margin-top: 10px;\n        \n        .name{\n          @extend %tweet-name; \n          margin-right: 8px;        \n        }\n      }\n      .text {\n        word-break: break-all;\n      }\n    }\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollowCard.vue?vue&type=template&id=0a947838&scoped=true&\"\nimport script from \"./UserFollowCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollowCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollowCard.vue?vue&type=style&index=0&id=0a947838&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a947838\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=style&index=0&id=a64cea74&lang=scss&scoped=true&\""],"sourceRoot":""}