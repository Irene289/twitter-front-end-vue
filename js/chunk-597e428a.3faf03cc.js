(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-597e428a"],{"1b80":function(t,e,n){},"520a":function(t,e,n){"use strict";n("f07b")},"8e88":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"follow__card"},[o("div",{staticClass:"follow__card__item"},[t._t("avatar",(function(){return[o("img",{attrs:{src:n("b163"),alt:""}})]}))],2),o("div",{staticClass:"follow__card__item"},[o("div",{staticClass:"account"},[o("p",{staticClass:"name"},[t._t("name")],2),t._t("btn")],2),o("p",{staticClass:"text"},[t._t("text")],2)])])},r=[],i={},s=i,a=(n("520a"),n("2877")),l=Object(a["a"])(s,o,r,!1,null,"0a947838",null);e["a"]=l.exports},cc95:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"follower-container"},[[t.noFollowings?n("h3",[t._v("尚未追蹤其他用戶")]):t._e(),t._l(t.followings,(function(e){return n("UserFollowCard",{key:e.id,scopedSlots:t._u([{key:"avatar",fn:function(){return[n("img",{staticClass:"avatar",attrs:{src:t._f("avatarFilter")(e.avatarImg),alt:""},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.visit(e.id,"user-tweets")}}})]},proxy:!0},{key:"name",fn:function(){return[t._v(" "+t._s(e.name)+" ")]},proxy:!0},{key:"id",fn:function(){return[t._v(" "+t._s(e.account)+" ")]},proxy:!0},{key:"btn",fn:function(){return[n("div",{staticClass:"btn-group"},[e.id!==t.currentUser.id?[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.is_following,expression:"!following.is_following"}],staticClass:"follow",attrs:{disabled:t.isProcessing},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.follow(e.id)}}},[t._v(" 跟隨 ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.is_following,expression:"following.is_following"}],staticClass:"following",attrs:{disabled:t.isProcessing},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.unfollow(e.id)}}},[t._v("正在跟隨 ")])]:n("button",{staticClass:"following",attrs:{disabled:""}},[t._v(" 用戶本人 ")])],2)]},proxy:!0},{key:"text",fn:function(){return[t._v(" "+t._s(t._f("textFilter")(e.introduction))+" ")]},proxy:!0}],null,!0)})}))]],2)},r=[],i=n("5530"),s=n("1da1"),a=n("2909"),l=(n("96cf"),n("4de4"),n("d3b7"),n("d9e2"),n("d81d"),n("2708")),c=n("2f62"),u=n("f0e5"),f=n("8e88"),w=n("1602"),d=n("2fa3"),g={name:"UserFollowing",components:{UserFollowCard:f["a"]},mixins:[l["c"],l["d"],l["b"]],data:function(){return{followings:Object(a["a"])(this.initialFollowings),noFollowings:!1,isProcessing:!1}},props:{initialFollowings:{type:Array,required:!0}},methods:{fetchUserFollowings:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.$store.commit("setIsLoading",!0),n.next=4,w["a"].get({id:t});case 4:if(o=n.sent,r=o.data,i=o.statusText,s=r.Follower,e.followings=s.filter((function(t){return"user"===t.role})),0===s.length?e.noFollowings=!0:e.noFollowings=!1,"OK"===i){n.next=12;break}throw new Error(i);case 12:e.$store.commit("setIsLoading",!1),n.next=19;break;case 15:n.prev=15,n.t0=n["catch"](0),e.$store.commit("setIsLoading",!1),d["a"].fire({icon:"error",title:"無法取得追蹤中用戶資料，請稍後再試"});case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))()},follow:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.isProcessing=!0,n.next=4,u["a"].follow({id:t});case 4:if(o=n.sent,r=o.statusText,"OK"===r){n.next=8;break}throw new Error(r);case 8:e.followings=e.followings.map((function(e){return e.id!==t?e:e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{is_following:!0}):void 0})),e.$emit("after-userfollow"),console.log("afterUserFollow"),e.isProcessing=!1,n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](0),e.isProcessing=!1,d["a"].fire({icon:"error",title:"無法追蹤此用戶，請稍後再試"});case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))()},unfollow:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.isProcessing=!0,n.next=4,u["a"].unFollow({id:t});case 4:if(o=n.sent,r=o.statusText,"OK"===r){n.next=8;break}throw new Error(r);case 8:e.followings=e.followings.map((function(e){return e.id!==t?e:e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{is_following:!1}):void 0})),e.$emit("after-userfollow"),e.isProcessing=!1,n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](0),e.isProcessing=!1,d["a"].fire({icon:"error",title:"無法取消追蹤此用戶，請稍後再試"});case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},visit:function(t,e){this.visitUserPage(t,e)}},computed:Object(i["a"])({},Object(c["b"])(["currentUser"])),beforeRouteUpdate:function(t,e,n){var o=t.params.id;this.fetchUserFollowings(o),n()},created:function(){var t=this.$route.params.id;this.fetchUserFollowings(t)},watch:{initialFollowings:function(t){this.followings=Object(a["a"])(t),0===this.followings.length?this.noFollowings=!0:this.noFollowings=!1}}},v=g,p=(n("ddfc"),n("2877")),m=Object(p["a"])(v,o,r,!1,null,"679c9a19",null);e["default"]=m.exports},ddfc:function(t,e,n){"use strict";n("1b80")},f07b:function(t,e,n){}}]);
//# sourceMappingURL=chunk-597e428a.3faf03cc.js.map