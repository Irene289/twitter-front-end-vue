{"version":3,"sources":["webpack:///./src/views/UserFollow.vue?aa17","webpack:///src/views/UserFollow.vue","webpack:///./src/views/UserFollow.vue?b758","webpack:///./src/views/UserFollow.vue?d5ea","webpack:///./src/assets/static/images/leftArrow@2x.png","webpack:///./src/components/NavTab.vue?b2cd","webpack:///./src/views/UserFollow.vue?eece","webpack:///./src/components/NavTab.vue?5dc2","webpack:///./src/components/NavTab.vue?fa4b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","stopPropagation","preventDefault","visit","userId","_v","_s","userName","tweetNum","scopedSlots","_u","key","fn","name","params","id","proxy","followings","followers","afterUserFollow","topUsers","afterPopularClick","staticRenderFns","mixins","components","Popular","Sidebar","NavTab","data","methods","pathName","fetchUser","userAPI","statusText","Toast","icon","title","fetchUserTweets","fetchTopUsers","rank","created","computed","mapState","component","module","exports","_t","script"],"mappings":"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","file":"js/chunk-55a98074.6abcc561.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2 sidebar\"},[_c('Sidebar')],1),_c('div',{staticClass:\"col-7 content-container\"},[_c('div',{staticClass:\"title\"},[_c('img',{staticClass:\"title__item \",attrs:{\"src\":require(\"../assets/static/images/leftArrow@2x.png\"),\"alt\":\"\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.visit(_vm.userId, 'user-tweets')}}}),_c('div',{staticClass:\"title__item user\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.visit(_vm.userId, 'user-tweets')}}},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.userName))]),_c('p',{staticClass:\"tweet-num\"},[_vm._v(_vm._s(_vm.tweetNum+'推文'))])])]),_c('div',{staticClass:\"nav-container\"},[_c('NavTab',{scopedSlots:_vm._u([{key:\"nav-item\",fn:function(){return [_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{\n                  name:'follower',\n                  params: {id: _vm.userId}\n                }}},[_c('p',{staticClass:\"nav-item\"},[_vm._v(\"追蹤者\")])])]},proxy:true}])}),_c('NavTab',{scopedSlots:_vm._u([{key:\"nav-item\",fn:function(){return [_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{\n                  name:'following',\n                  params: {id: _vm.userId}\n                }}},[_c('p',{staticClass:\"nav-item\"},[_vm._v(\"正在追隨\")])])]},proxy:true}])})],1),_c('div',{staticClass:\"scrollbar\"},[_c('router-view',{attrs:{\"initial-followings\":_vm.followings,\"initial-followers\":_vm.followers},on:{\"after-userfollow\":_vm.afterUserFollow}})],1)]),_c('div',{staticClass:\"col-3  popular-users\"},[_c('Popular',{attrs:{\"top-users\":_vm.topUsers},on:{\"after-follow\":_vm.afterPopularClick}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n   <main>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-2 sidebar\">\n          <Sidebar />\n        </div>\n        <div class=\"col-7 content-container\">\n          <div class=\"title\">\n            <img\n              @click.stop.prevent=\"visit(userId, 'user-tweets')\" \n              class=\"title__item \" \n              src=\"../assets/static/images/leftArrow@2x.png\" \n              alt=\"\"\n            >\n            <div \n              @click.stop.prevent=\"visit(userId, 'user-tweets')\"\n              class= \"title__item user\">\n              <p class= \"name\">{{userName}}</p>\n              <p class= \"tweet-num\">{{tweetNum+'推文'}}</p>\n            </div>          \n          </div>\n          <div class=\"nav-container\">\n            <NavTab>\n              <template v-slot:nav-item> \n                <router-link\n                  :to=\"{\n                    name:'follower',\n                    params: {id: userId}\n                  }\"\n                  class=\"nav-link\"\n                >\n                <p class=\"nav-item\">追蹤者</p> \n                </router-link>         \n              </template>\n            </NavTab>\n            <NavTab>\n              <template v-slot:nav-item> \n                <router-link\n                  :to=\"{\n                    name:'following',\n                    params: {id: userId}\n                  }\"\n                  class=\"nav-link\"\n                >\n                <p class=\"nav-item\">正在追隨</p> \n                </router-link>         \n              </template>\n            </NavTab>\n          </div>     \n          <div class=\"scrollbar\">\n            <router-view \n              :initial-followings=\"followings\"\n              :initial-followers=\"followers\"\n              @after-userfollow=\"afterUserFollow\"\n            />\n          </div>\n        </div>\n        <div class=\"col-3  popular-users\">\n          <Popular \n            :top-users=\"topUsers\"\n            @after-follow=\"afterPopularClick\"\n          />\n        </div>\n      </div>      \n    </div>  \n  </main>\n</template>\n<script>\n  import {visitPage} from '../utils/mixins'\n  import userAPI from '../apis/user'\n  import {Toast} from '../utils/helpers'\n  import Popular from '../components/Popular.vue'\n  import Sidebar from '../components/Sidebar.vue'\n  import NavTab from './../components/NavTab.vue'\n  import {mapState} from 'vuex'\n\n  export default {\n    name: 'UserFollow',\n    mixins:[visitPage],\n    components:{\n      Popular,\n      Sidebar,\n      NavTab\n    },\n    data(){\n      return {\n        userId:8,\n        userName:'',\n        tweetNum:0,\n        followings: [],  // 要放 followers\n        followers: [],   // 要放 followings\n        topUsers: []\n      }\n    },\n    methods:{\n      visit(id,pathName){\n        this.visitUserPage(id,pathName)\n      },\n      async fetchUser(userId){\n        try{\n          const {data, statusText} = await userAPI.get({id:userId})   \n          const {id,name} = data\n          this.userId = id\n          this.userName = name  \n          this.followings = data.Follower  \n          this.followers = data.Following\n          if(statusText !== 'OK'){\n            throw new Error(statusText)\n          }\n\n        }catch(error){\n          Toast.fire({\n            icon:'error',\n            title:'無法載入使用者資訊，請稍後再試'\n          })\n        }       \n      },\n      async fetchUserTweets(id){\n        try{\n          const {data,statusText} = await userAPI.getTweets({id})\n          this.tweetNum = data.length\n          if(statusText !== 'OK'){\n            throw new Error(statusText)\n          }\n        } catch(error){\n          if(error.response.status === 500){\n            this.tweetNum = 0\n            return\n          }       \n        }\n      },\n      async fetchTopUsers(rank){\n        try{\n          const {data, statusText} = await userAPI.getTopUsers({rank})\n          this.topUsers = [...data]\n          // 後端已篩過非user\n          this.topUsers = data.filter(user => user.id !== this.currentUser.id )\n          if(statusText !== \"OK\"){\n            throw new Error(statusText)\n          }\n        }catch(error){\n          Toast.fire({\n            icon: 'error',\n            title: '無法取得人氣用戶，請稍後再試'\n          })\n        }\n    },\n      afterPopularClick() {\n        const {id} = this.$route.params\n        // 接受 Popular 的 emit 後，去 fetchUser 打 API 更新 followers 跟 followings\n        this.fetchUser(id)\n      },\n      afterUserFollow() {\n        // 接受 UserFollowing 跟 UserFollower 的 emit 後，去 fetchTopUsers 打 API 更新 topUsers\n        // 再把 topUsers 用 props 傳遞到 Popular\n        this.fetchTopUsers(10)\n      }\n    },\n     created(){\n      const {id} = this.$route.params\n      this.fetchUser(id)\n      this.fetchUserTweets(id)\n      this.fetchTopUsers(10)\n    },\n    computed:{\n      ...mapState(['currentUser'])\n    }, \n  }\n</script>\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/_basic.scss\";\n.nav-link.active,\n.nav-link:focus{\n  .nav-item{\n    border-bottom: 2px solid $orange;   \n  } \n}\n.nav-item{\n  padding: 15px 0;\n}\n.content-container{\n  padding:0;\n  border-left: 1px solid $border-grey;\n  border-right: 1px solid $border-grey;\n}\n.title{\n  cursor: pointer;\n  padding-left: 28px;\n  height: 75px;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid $border-grey;\n  img{\n    width: 17px;\n    height: 14px;\n    cursor: pointer;\n  }\n  .user{\n    margin-left: 19px;\n    .name{\n      @extend %tweet-name;\n      font-size: 18px;\n    }\n    .tweet-num{\n        @extend %tweet-account;\n        font-weight: 500;\n        font-size:13px;\n        line-height: 18px;\n    }\n  }\n}\n.nav-container{\n  display: flex;\n  height: 54px;\n  border-bottom: 1px solid $border-grey;\n}\n.scrollbar {\n    height: calc(100vh - 76px - 55px);\n    overflow-y: scroll;\n      &::-webkit-scrollbar {\n        width: 8px;\n      }\n      &::-webkit-scrollbar-track {\n        box-shadow: inset 0 0 1px $scrollbar;\n        border-radius: 4px;\n      }\n      &::-webkit-scrollbar-thumb {\n        border-radius: 4px;\n        background-color: $scrollbar;\n      }\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollow.vue?vue&type=template&id=23c53fcf&scoped=true&\"\nimport script from \"./UserFollow.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollow.vue?vue&type=style&index=0&id=23c53fcf&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23c53fcf\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB5SURBVHgB7dfBCYAwEETR0Qoswc6SzreEpAPNQg5R4kGFnct8GMnNBwoi8L7UVtqsnyn5jY9hBYTuCJ8huBnClxGYEEIIIcRXRNTMDUs/7OBW13bZwK/6JYP7aAqGd/EJk0AoQxhhhBEmHkP5r5lhDMRyB1y+EX87AdxCwzt7prpuAAAAAElFTkSuQmCC\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavTab.vue?vue&type=style&index=0&id=a256ae64&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollow.vue?vue&type=style&index=0&id=23c53fcf&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"nav__tab\"},[_c('li',{staticClass:\"nav__tab__list__item\"},[_vm._t(\"nav-item\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./NavTab.vue?vue&type=template&id=a256ae64&scoped=true&\"\nvar script = {}\nimport style0 from \"./NavTab.vue?vue&type=style&index=0&id=a256ae64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a256ae64\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}