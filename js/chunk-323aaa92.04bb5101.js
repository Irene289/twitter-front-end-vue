(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-323aaa92"],{2694:function(e,t,r){},"520a":function(e,t,r){"use strict";r("f07b")},7384:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"follower-container"},[[e.noFollowers?r("h3",[e._v("尚無追蹤者")]):e._l(e.followers,(function(t){return r("UserFollowCard",{key:t.id,scopedSlots:e._u([{key:"avatar",fn:function(){return[r("img",{staticClass:"avatar",attrs:{src:e._f("avatarFilter")(t.avatarImg),alt:""},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.visit(t.id,"user-tweets")}}})]},proxy:!0},{key:"name",fn:function(){return[e._v(" "+e._s(t.name)+" ")]},proxy:!0},{key:"id",fn:function(){return[e._v(" "+e._s(t.account)+" ")]},proxy:!0},{key:"btn",fn:function(){return[r("div",{staticClass:"btn-group"},[e.currentUser.id!==t.id?r("div",[r("button",{directives:[{name:"show",rawName:"v-show",value:!t.is_following,expression:"!follower.is_following"}],staticClass:"follow",attrs:{disabled:e.isProcessing},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.follow(t.id)}}},[e._v(" 跟隨 ")]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.is_following,expression:"follower.is_following"}],staticClass:"following",attrs:{disabled:e.isProcessing},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.unfollow(t.id)}}},[e._v(" 正在跟隨 ")])]):r("button",{staticClass:"following",attrs:{disabled:""}},[e._v(" 用戶本人 ")])])]},proxy:!0},{key:"text",fn:function(){return[e._v(" "+e._s(e._f("textFilter")(t.introduction))+" ")]},proxy:!0}],null,!0)})}))]],2)},n=[],s=r("2909"),i=r("5530"),a=r("1da1"),l=(r("96cf"),r("4de4"),r("d3b7"),r("d9e2"),r("d81d"),r("2708")),c=r("2f62"),u=r("f0e5"),f=r("8e88"),w=r("1602"),d=r("2fa3"),v={name:"UserFollower",components:{UserFollowCard:f["a"]},mixins:[l["c"],l["d"],l["b"]],data:function(){return{followers:[],noFollowers:!1,isProcessing:!1}},props:{initialFollowers:{type:Array,required:!0}},methods:{fetchUserFollowers:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.$store.commit("setIsLoading",!0),r.next=4,w["a"].get({id:e});case 4:if(o=r.sent,n=o.data,s=o.statusText,i=n.Following,t.followers=i.filter((function(e){return"user"===e.role})),0===i.length?t.noFollowers=!0:t.noFollowers=!1,"OK"===s){r.next=12;break}throw new Error(s);case 12:t.$store.commit("setIsLoading",!1),r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](0),t.$store.commit("setIsLoading",!1),d["a"].fire({icon:"error",title:"無法取得追蹤中用戶資料，請稍後再試"});case 19:case"end":return r.stop()}}),r,null,[[0,15]])})))()},follow:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,u["a"].follow({id:e});case 4:if(o=r.sent,n=o.statusText,"OK"===n){r.next=8;break}throw new Error(n);case 8:t.followers=t.followers.map((function(t){return t.id!==e?t:t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{is_following:!0}):void 0})),t.$emit("after-userfollow"),t.isProcessing=!1,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法追蹤此用戶，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},unfollow:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,u["a"].unFollow({id:e});case 4:if(o=r.sent,n=o.statusText,"OK"===n){r.next=8;break}throw new Error(n);case 8:t.followers=t.followers.map((function(t){return t.id!==e?t:t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{is_following:!1}):void 0})),t.$emit("after-userfollow"),t.isProcessing=!1,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法取消追蹤此用戶，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},visit:function(e,t){this.visitUserPage(e,t)}},computed:Object(i["a"])({},Object(c["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUserFollowers(e)},beforeRouteUpdate:function(e,t,r){var o=e.params.id;this.fetchUserFollowers(o),r()},watch:{initialFollowers:function(e){this.followers=Object(s["a"])(e),0===this.followers.length?this.noFollowers=!0:this.noFollowers=!1}}},p=v,m=(r("91f0"),r("2877")),h=Object(m["a"])(p,o,n,!1,null,"a64cea74",null);t["default"]=h.exports},"8e88":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"follow__card"},[o("div",{staticClass:"follow__card__item"},[e._t("avatar",(function(){return[o("img",{attrs:{src:r("b163"),alt:""}})]}))],2),o("div",{staticClass:"follow__card__item"},[o("div",{staticClass:"account"},[o("p",{staticClass:"name"},[e._t("name")],2),e._t("btn")],2),o("p",{staticClass:"text"},[e._t("text")],2)])])},n=[],s={},i=s,a=(r("520a"),r("2877")),l=Object(a["a"])(i,o,n,!1,null,"0a947838",null);t["a"]=l.exports},"91f0":function(e,t,r){"use strict";r("2694")},f07b:function(e,t,r){}}]);
//# sourceMappingURL=chunk-323aaa92.04bb5101.js.map